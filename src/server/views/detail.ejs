<% 

%>

<%- include('partials/header.ejs') %>


<h2><%= title %></h2>
<h3><%= name %></h3>
<p><%= time %></p>
<p><%= content %></p>
<img src="<%= image %>" alt="image">

<a href="/edit?fileName=<%= fileName %>"><button>Edit</button></a>
<button onclick="deleteFile('<%= fileName %>')">Delete</button>

<%- include('partials/footer.ejs') %>


<script>
  function deleteFile(fileName) {
    fetch(`/files/${fileName}`, {
      method: 'DELETE',
    })
    .then(response => {
      if (!response.ok) {
        throw new Error('Failed to delete file');
      }
      return response.json();
    })
    .then(data => {
      console.log(data.message);
      
      // Remove any references to the deleted file from the UI
      // Optionally redirect to the homepage or refresh the page after successful deletion
      window.location.href = '/';
    })
    .catch(error => console.error('Error:', error));
  }
</script>